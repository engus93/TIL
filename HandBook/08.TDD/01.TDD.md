# TDD(Test Driven Development)

## TDD란?

> TDD는 짧은 개발 주기(보통 몇 분에서 몇 시간)의 반복에 의존하는 개발 프로세스로서, Extreme Programming(XP)의 “Test-First” 개념에 기반을 둔 단순한 설계를 중요시합니다. TDD를 가장 쉽게 표현한 것이 “Red-Green-Refactor” 개발 주기입니다.

![TDD Cycle](https://cdn-images-1.medium.com/max/1600/1*jFw7ZZMoVcsEYM_fS33DBA.gif)

- `Red` 단계에서는 **실패하는 테스트 코드를 먼저 작성**합니다.
- `Green` 단계에서는 테스트 코드를 성공시키기 위한 **실제 코드를 작성**합니다.
- `Yellow` 단계에서는 중복 코드 제거, 일반화 등의 **리팩토링을 수행**합니다.

> 중요한 것은 실패하는 테스트 코드를 작성할 때까지 실제 코드를 작성하지 않는 것과, 실패하는 테스트를 통과할 정도의 최소 실제 코드를 작성해야 하는 것입니다. 이를 통해, 실제 코드에 대해 기대되는 바를 보다 명확하게 정의함으로써 불필요한 설계를 피할 수 있고, 정확한 요구 사항에 집중할 수 있습니다.

## TDD의 장점

### `단위 테스트`

- 동작하는 코드에 대해 자신감 상승
- 회귀 테스트(regression tests)를 통해 자유롭게 리팩토링 가능
- 코드에 대한 지식 증가
- 실제 코드에 좋지 않은 설계 구조를 손쉽게 파악 가능

### `Test-First`

- 과도한 설계를 피할 수 있고, 간결한 인터페이스를 갖을 수 있다.
- 요구 사항을 구체화하는 문서로써 활용될 수 있다.  
    → 실행 가능한 문서(Executable documentation) 또는 명세(Specification)

> 향후 요구 사항이 변경되면 테스트 코드 부분이 먼저 변경되어야 하므로, 항상 최종 정보를 제공하는 문서로 관리될 수 있기 때문입니다.


## TDD의 적용 사례

### Ex) 생년월일을 input(입력)받으면 현재 나이를 output(출력)하는 프로그램

1. 우선 고정 값을 정해 대입하여 구조를 구상한다.
    - 2015(태어난 연도), 2018(현재)을 넣어서 4를 출력하는 구조를 구상한다.
2. 만들기도 전에 만든 후에 무엇을 테스트할지를 설계한다.
    - 2015, 2018을 입력하면 2가 나오는 실패하는 테스트 코드(장차 만들 프로그램을 테스트 할 코드)를 만든다.
3. 그 다음에 위에 테스트에 통과하는 코드를 만든다.
    - 올해의 연도 - 태어난
    - 2018 - 2015
4. ②의 테스트 코드로 ③의 코드를 실행한다.
5. 통과했으면 새로운 테스트를 추가한다.
    - 그 다음은 생월을 추가하는 경우를 만듬
6. ① ~ ⑤의 작업을 계속 반복한다.

## TDD의 핵심 개념

> 결정과 피드백 사이의 갭에 대한 인식, 더 나아가 결정과 피드백 사이의 갭을 조절하기 위한 테크닉이라고도 할 수 있다.

- 켄트 벡(Kent Beck, 익스트림 프로그래밍의 창시자)
    - TDD란?
        - 결정과 피드백 사이의 갭에 대한 인식이다.
        - 결정과 피드백 사이의 갭을 조절하기 위한 기술이다.
    - TDD는 프로그래밍 기법이나 기술적인 느낌보다는 심리적인 것으로 볼 수 있다.

- 결정(decision)
    - 프로그램을 하다보면 ‘이 방법으로 해야지’, ‘이 부분은 이걸 이용해서 짜야지’라는 것을 결정한다.

- 피드백(feedback)
    - 프로그램을 하다보면 성공/실패(에러)라는 피드백을 받는다.

- 즉, 위의 예와 함께 설명하자면
    - 결정: 위에 1번(TDD의 적용 사례 - ①)을 목표로 코드를 작성할 때, ‘나는 빼기로 나이를 구해야겠다.’라는 것을 결정한다.
    - 피드백: 빼기로 계산했을 때의 코드를 테스트 프로그램을 실행한 결과로, 된다/안된다라는 프로그램 상의 피드백을 받는다.
    - 이 둘 사이의 갭을 내가 인식한다면 TDD를 하고 있는 것이다.

## TDD의 효과

### 1. 피드백

- TDD를 하면 피드백이 증가한다.

    - 테스트를 통과하는 것으로 잘되고 있는가를 자주 확인할 수 있다.
    - 이 부분은 사람들이 쉽게 느낄 수 있다.

### 2. 협력

- 켄트 벡(Kent Beck)

    - ‘test’는 일반적으로 동사로 사용한다. ‘테스트한다.’, ‘테스트해라.’
    - 예를 들어, 누가 나한테 생년월일(input)을 입력받으면 현재 나이(output)를 - 출력하는 프로그램을 주고 test해보라고 한다면 내가 할 수 있는 것은 숫자를 여러 개 찍어보는 것이다.
        - 태어난 시간과 지금 시간이 같으면 0
        - 태어난 시간이 더 미래의 시간이면 ‘출생 전’
        - 등등
    - 그러나 TDD를 하면 ‘test’는 명사가 된다.

- ‘test’가 명사가 되면?
    - 동사는 그 순간에만 하는 것이고, 명사(대상, 목적어)는 이후에도 소유할 수가 있다.  
    → record로 남을 수 있다.
    - ‘test’가 저장된다는 것은 남들에게 남들에게 테스트 코드를 보여줄 수 있고, 남들은 그 코드를 직접 실행해볼 수 있다는 것이다.

- 그렇다면 TDD는 왜 협력을 증진시키는가?
    - ‘test’가 명사(대상, 목적어)가 되는 순간 이것을 공유하기가 쉬워진다.
    - 공유하면 협력이 증진된다.
        - 남이 짠 코드를 빨리 쉽게 이해할 수 있다.

- 또한 왜 이렇게 짰을까 궁금할 때 ‘test’를 공유하고 그 테스트 코드를 보면 의도를 이해할 수 있다.

## 참고 사이트

- [코드 품질을 높여주는 테스트 주도 개발 알아보기](https://www.samsungsds.com/global/ko/support/insights/Test-Driven-Development.html)
- [Agile TDD(테스트 주도 개발)란](https://gmlwjd9405.github.io/2018/06/03/agile-tdd.html)
- [테스트 주도 개발에 대하여 - TDD와 BDD 그리고 DDD](https://asfirstalways.tistory.com/296)